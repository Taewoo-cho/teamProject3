<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
$(document).ready(function() {	
	$("#search1").on("click", function() {
		var search2 = $.trim($("#search2").val());
	
		$.ajax({
			url: "/ajax/search",
			type : "post",
			data: {shopName : search2},
			success: function(data) {
					var cards = $("#items");
					
					cards.empty();
					
					for (var i = 0; i < data.length; i++) {
						var str = '<div class="card"">';
						str += '<div class="row my-5 ms-3">';
						str += '<div class="col-sm-4 text-center">';
						str += '<a href="#"><img src="c:/image/kategorie/koFood.jpg" th:src="@{/kategorie/koFood.jpg}" class="rounded-circle me-5" style="width: 120px; height: 120px;"></a>';
						str += '</div>';
						str += '<div class="col-sm-7">';
						str += '<div>';
						str += '<div>'; 	
						str += '<div class="card-body">';
						str += '<h2 class="card-title">' + data[i].shopName +'</h2>';
						str += '<p class="card-text">' + data[i].shopDetail +'</p>';
						str += '</div></div></div></div></div></div>';
						
						cards.append(str);
					}							

			}, error: function() {
				alert("통신 실패");				
			}
		}); 
	});
});
</script>

</head>
<body>
	<header>
		<!-- 네비게이션 1-->
		<div class="container">
			<nav class="navbar navbar-expand-sm navbar-light px-5" style=" background:#f0f0f5;">
				<a href="/main" class="navbar-brand text-muted">T3</a>
				<div class="ms-auto">
					<a href="/login" style="text-decoration:none" class="pe-3">로그인</a>
					<a href="/join" style="text-decoration:none">회원가입</a>
				</div>
			</nav>
			<!-- 네비게이션 2 -->
			<!-- offcanvas -->
			<nav class="navbar navbar-light border-bottom px-5">
			  <div class="container-fluid">
			    <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
			      <span class="navbar-toggler-icon"></span>
			    </button>
			    <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
			      <div class="offcanvas-header">
			        <h5 class="offcanvas-title ps-5" id="offcanvasNavbarLabel">카테고리</h5>
			        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
			      </div>
			      <div class="offcanvas-body">
				       <ul class="navbar-nav justify-content-end flex-grow-1 ps-5">
				          <li class="nav-item">
				          		<a class="nav-link active" aria-current="page" href="/main">Home</a>
				          </li>
				          <li class="nav-item">
				            <a class="nav-link" href="/shopList/ko">한식</a>
				          </li>
				          <li class="nav-item">
				            <a class="nav-link" href="/shopList/we">양식</a>
				          </li>
				          <li class="nav-item">
				            <a class="nav-link" href="/shopList/jp">일식</a>
				          </li>
				          <li class="nav-item">
				            <a class="nav-link" href="/shopList/ch">중식</a>
				          </li>
				          <li class="nav-item">
				            <a class="nav-link" href="/shopList/snack">야식</a>
				          </li>
				          <li class="nav-item">
				            <a class="nav-link" href="/shopList/de">디저트</a>
				          </li>
			        	</ul>
			    	</div>
			    </div>
				<ul class="navbar-nav me-auto">
					<li class="nav-item">
						<a href="#" class="nav-link text-muted active ms-3"><h2>카테고리</h2></a>
					</li>
				</ul>
				<!-- 검색창 -->
				<div>
					<form name="form-search" method="get" action="#">
					    <div class="input-group">				     
					      <input type="submit" name="search1" id="search1" class="btn btn-search text-white" value="Q" style=" background:#0099ff; border-radius: 20px 0px 0px 20px;">					      
					      <input size=70 type="text" name="search2" id="search2" class="form-control" placeholder="검색어를 입력하세요" aria-label="search" aria-describedby="search" style="border-radius: 0px 20px 20px 0px; border-color: #0099ff;">
					    </div>
					</form>
				</div>
				<!-- 마이페이지, 장바구니 -->
				<div class="ms-auto">
					<div class="p-3">
						<a href="#"><img src="c:/image/main/user.png" th:src="@{/main/user.png}" style="width: 50px; height: 50px;" ></a>
						<a href="#"><img src="c:/image/main/cart.png" th:src="@{/main/cart.png}" style="width: 50px; height: 50px;" class="ms-4"></a>
					</div>
					<div>
						<a href="#" style="text-decoration:none" class="pe-3">마이페이지</a>
						<a href="#" style="text-decoration:none">장바구니</a>
					</div>
				</div>
			</div>
			</nav>	
		</div>	
	</header>
	
	<main>
		<!-- 가게 목록 -->
		<div class="container">
			<div class="mt-2 p-5">
				<div class="border p-5 shadow p-3 mb-5 bg-white rounded" id="items" style="width: 1150px; height: 800px; border-radius: 40px;">
					<div class="card" th:if="${#lists.size(shopList)} > 0" th:each="list : ${shopList}">
						<div class="row my-5 ms-3">
							<div class="col-sm-4 text-center">
								<a href="#"><img src="c:/image/kategorie/koFood.jpg"
									th:src="@{/kategorie/koFood.jpg}" class="rounded-circle me-5"
									style="width: 120px; height: 120px;"></a>
							</div>
							<div class="col-sm-7">
								<div>
									<div class="card-body">
										<h2 class="card-title" id="name" th:text="${list.shopName}"></h2>
										<p class="card-text" id="detail" th:text="${list.shopDetail}"></p>										
									</div>
									<div th:unless="${#lists.size(shopList)} > 0">
										<p>내용이 없습니다</p>
									</div>
								</div>
							</div>				
						</div>
					</div>
					<!-- 가게 목록 페이징 -->
					<!-- <div class="my-3 clearfix">
						<ul class="pagination justify-content-center">
				 			<li class="page-item" th:classappend="${pages.getPrePage() == 0} ? 'disabled'">
								<a class="page-link" th:href="@{/shopList(pageNum=${pages.getPrePage()})}">&laquo;</a>
							</li>
							<li class="page-item" th:each="page : ${#numbers.sequence(pages.getNavigateFirstPage(), pages.getNavigateLastPage())}" th:classappend="${page == pages.getPageNum()} ? 'active'">
								<a class="page-link" th:text="${page}" th:href="@{/shopList(pageNum=${page})}"></a>
							</li>
							<li class="page-item" th:classappend="${pages.getNextPage() == 0} ? 'disabled'">
								<a class="page-link" th:href="@{/shopList(pageNum=${pages.getNextPage()})}">&raquo;</a>
							</li>
						</ul> -->
					</div>
				</div>
			</div>
		</div>
	</main>
	
	<footer th:replace="layout/footer :: footer"></footer>
</body>
</html>